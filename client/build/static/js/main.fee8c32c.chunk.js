(this["webpackJsonphow-broke"]=this["webpackJsonphow-broke"]||[]).push([[0],{76:function(e,n,t){},80:function(e,n,t){},81:function(e,n,t){},88:function(e,n,t){"use strict";t.r(n);var a=t(3),c=t.n(a),s=t(60),r=t.n(s),i=(t(76),t(8)),l=t(11),o=t(7),j=t(67),b=t(69),d=t(104),u=t(102),m=t(66),O=t(1);var h=t(61),g=t(62),x=t(47),p=t.n(x),v=new(function(){function e(){Object(h.a)(this,e)}return Object(g.a)(e,[{key:"getProfile",value:function(){return p()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return p()(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}());t(80);var f=t(37);t(81);function w(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"overview-container",children:[Object(O.jsx)("div",{children:Object(O.jsx)("h1",{children:"Financial Overview"})}),Object(O.jsx)("div",{children:"Yearly Income: $85,000"}),Object(O.jsxs)("div",{class:"place-container",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("ul",{children:"Monthly Budget: $4,500"}),Object(O.jsx)("ul",{children:"Monthly Bills: $2,100"})]}),Object(O.jsxs)(f.a,{className:"rounded-pill",children:[Object(O.jsx)(f.a,{striped:!0,variant:"success",now:35},1),Object(O.jsx)(f.a,{variant:"warning",now:20},2),Object(O.jsx)(f.a,{striped:!0,variant:"danger",now:10},3)]})]})]}),Object(O.jsx)("br",{})]})}t(58);function y(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(w,{})})}var k,N,S,$,_,I,D,Y,B=function(){return v.loggedIn()?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(y,{})}):Object(O.jsxs)(O.Fragment,{children:["MORE MONEY MORE PROBLEMS",Object(O.jsx)("br",{}),"Animation logo intro",Object(O.jsx)("br",{}),"Loading",Object(O.jsx)("br",{}),Object(O.jsxs)("ul",{className:"flex-row",children:[Object(O.jsx)("li",{children:Object(O.jsx)(l.b,{to:"/signup",children:"Signup"})}),Object(O.jsx)("li",{className:"mx-1",children:Object(O.jsx)(l.b,{to:"/login",children:"Login"})})]})]})},C=t(39),E=t(20),F=t(31),L=t(29),M=t.n(L),q=t(96),T=t(21),A=t(103),P=(Object(A.a)(k||(k=Object(T.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),Object(A.a)(N||(N=Object(T.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"])))),U=Object(A.a)(S||(S=Object(T.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),R=(Object(A.a)($||($=Object(T.a)(["\n  mutation addOrder($budgets: [ID]!) {\n    addOrder(budgets: $budgets) {\n      purchaseDate\n      budgets {\n        _id\n        name\n        description\n        amountofmoney\n        quantity\n        category {\n          name\n        }\n      }\n    }\n  }\n"]))),function(e){var n=Object(a.useState)({email:"",password:""}),t=Object(F.a)(n,2),c=t[0],s=t[1],r=Object(q.a)(U),o=Object(F.a)(r,2),j=o[0],b=o[1],d=b.error,u=b.data,m=function(e){var n=e.target,t=n.name,a=n.value;s(Object(i.a)(Object(i.a)({},c),{},Object(E.a)({},t,a)))},h=function(){var e=Object(C.a)(M.a.mark((function e(n){var t,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(c),e.prev=2,e.next=5,j({variables:Object(i.a)({},c)});case 5:t=e.sent,a=t.data,v.login(a.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:s({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}();return Object(O.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(O.jsx)("div",{className:"col-12 col-lg-10",children:Object(O.jsxs)("div",{className:"card",children:[Object(O.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Login"}),Object(O.jsxs)("div",{className:"card-body",children:[u?Object(O.jsxs)("p",{children:["Success! You may now head"," ",Object(O.jsx)(l.b,{to:"/",children:"back to the homepage."})]}):Object(O.jsxs)("form",{onSubmit:h,children:[Object(O.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:c.email,onChange:m}),Object(O.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:c.password,onChange:m}),Object(O.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),d&&Object(O.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:d.message})]})]})})})}),J=function(){var e=Object(a.useState)({username:"",email:"",password:""}),n=Object(F.a)(e,2),t=n[0],c=n[1],s=Object(q.a)(P),r=Object(F.a)(s,2),o=r[0],j=r[1],b=j.error,d=j.data,u=function(e){var n=e.target,a=n.name,s=n.value;c(Object(i.a)(Object(i.a)({},t),{},Object(E.a)({},a,s)))},m=function(){var e=Object(C.a)(M.a.mark((function e(n){var a,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(t),e.prev=2,e.next=5,o({variables:Object(i.a)({},t)});case 5:a=e.sent,c=a.data,v.login(c.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}();return Object(O.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(O.jsx)("div",{className:"col-12 col-lg-10",children:Object(O.jsxs)("div",{className:"card",children:[Object(O.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object(O.jsxs)("div",{className:"card-body",children:[d?Object(O.jsxs)("p",{children:["Success! You may now head"," ",Object(O.jsx)(l.b,{to:"/",children:"back to the homepage."})]}):Object(O.jsxs)("form",{onSubmit:m,children:[Object(O.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:t.name,onChange:u}),Object(O.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:t.email,onChange:u}),Object(O.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:t.password,onChange:u}),Object(O.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),b&&Object(O.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:b.message})]})]})})})},z=t.p+"static/media/logo.405c758a.png",V=function(){return Object(O.jsx)("header",{className:"bg-primary text-light mb-4 py-3 flex-row align-center",children:Object(O.jsxs)("div",{className:"container flex-row justify-space-between-lg justify-center align-center",children:[Object(O.jsx)("div",{children:Object(O.jsx)(l.b,{className:"text-light",to:"/",children:Object(O.jsx)("img",{src:z,alt:"logo"})})}),Object(O.jsx)("div",{children:v.loggedIn()?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(l.b,{className:"btn btn-lg btn-info m-2",to:"/me",children:[v.getProfile().data.username,"'s Budget"]}),Object(O.jsx)("button",{className:"btn btn-lg btn-light m-2",onClick:function(e){e.preventDefault(),v.logout()},children:"Logout"})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(l.b,{className:"btn btn-lg btn-info m-2",to:"/login",children:"Login"}),Object(O.jsx)(l.b,{className:"btn btn-lg btn-light m-2",to:"/signup",children:"Signup"})]})})]})})},G=t(101),H=Object(A.a)(_||(_=Object(T.a)(["\n  query me {\n    me {\n      _id\n      username\n      email\n      budgets {\n        _id\n        billName\n        billsDescription\n        createdAt\n      }\n    }\n  }\n"]))),K=(Object(A.a)(I||(I=Object(T.a)(["\n  query getThoughts {\n    budgets {\n      _id\n      billName\n      billsDescription\n      createdAt\n    }\n  }\n"]))),Object(A.a)(D||(D=Object(T.a)(["\n  query getCheckout($budgets: [ID]!) {\n    checkout(budgets: $budgets) {\n      session\n    }\n  }\n"]))),Object(A.a)(Y||(Y=Object(T.a)(["\n  query user($username: String!) {\n    user(username: $username) {\n      _id\n      username\n      email\n      budgets {\n        _id\n        billName\n        createdAt\n      }\n    }\n  }\n"])))),Q=function(){var e=Object(o.f)().username,n=Object(G.a)(e?K:H,{variables:{username:e}}),t=n.loading,a=n.data,c=(null===a||void 0===a?void 0:a.me)||(null===a||void 0===a?void 0:a.user)||{};return v.loggedIn()&&v.getProfile().data.username===e?Object(O.jsx)(o.a,{to:"/me"}):t?Object(O.jsx)("div",{children:"Loading..."}):null!==c&&void 0!==c&&c.username?Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:"flex-row justify-center mb-3",children:[Object(O.jsxs)("h2",{className:"col-12 col-md-10 bg-dark text-light p-3 mb-5",children:["Viewing ",e?"".concat(c.username,"'s"):"your"," profile."]}),Object(O.jsx)("div",{className:"col-12 col-md-10 mb-5"}),!e&&Object(O.jsx)("div",{className:"col-12 col-md-10 mb-3 p-3",style:{border:"1px dotted #1a1a1a"}})]})}):Object(O.jsx)("h4",{children:"You Budget"})},W=Object(j.a)({uri:"/graphql"}),X=Object(m.a)((function(e,n){var t=n.headers,a=localStorage.getItem("id_token");return{headers:Object(i.a)(Object(i.a)({},t),{},{authorization:a?"Bearer ".concat(a):""})}})),Z=new b.a({link:X.concat(W),cache:new d.a});var ee=function(){return Object(O.jsx)(u.a,{client:Z,children:Object(O.jsx)(l.a,{children:Object(O.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(O.jsx)(V,{}),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(o.b,{exact:!0,path:"/",children:Object(O.jsx)(B,{})}),Object(O.jsx)(o.b,{exact:!0,path:"/login",children:Object(O.jsx)(R,{})}),Object(O.jsx)(o.b,{exact:!0,path:"/signup",children:Object(O.jsx)(J,{})}),Object(O.jsx)(o.b,{exact:!0,path:"/home",children:Object(O.jsx)(B,{})}),Object(O.jsx)(o.b,{exact:!0,path:"/me",children:Object(O.jsx)(Q,{})}),Object(O.jsx)(o.b,{exact:!0,path:"/profiles/:username",children:Object(O.jsx)(Q,{})})]})]})})})};r.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(ee,{})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.fee8c32c.chunk.js.map